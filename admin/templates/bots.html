{% extends 'base.html' %}

{% block head %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const selectors = document.querySelectorAll('.bot-type-selector p');
            selectors.forEach(selector => {
                selector.addEventListener('click', function() {
                    selectors.forEach(s => s.classList.remove('active')); // Remove active class from all
                    this.classList.add('active'); // Add active class to clicked element
                    window.location.href = this.getAttribute('data-url');
                });
            });
            document.querySelector('#{{ active }}').classList.add('active');
        });
    </script>
    <link href="{{ url_for('static', path='/bots.css') }}" rel="stylesheet">
{% endblock %}


{% block content %}
    <div class="bot-type-selector">
{#    {% if managers %}#}
        <p id="managers" data-url="/bots/managers">Managers</p>
        <p id="parsers" data-url="/bots/parsers">Parsers</p>

    </div>
    <table>
        <tr>
            <th>Nickname</th>
            <th>Scope</th>
            {% block table_headers %} {% endblock %}
            <th>Proxy</th>
        </tr>
    {% for bot in bots %}
        <tr>
            <td>{{ bot.nickname }}</td>
            <td>{{ bot.scope }}</td>

            {% block specific_fields %} {% endblock %}

            {% if bot.proxy_status %}
                <td class="bot-proxy-up">{{ bot.proxy }}</td>
            {% else %}
                <td class="bot-proxy-down">{{ bot.proxy }}</td>
            {% endif %}
        </tr>
    {% endfor %}
    </table>
{% endblock %}